# TSS Demo

## Quick Start

Start 3 nodes in separate terminals using the test script:

```bash
# Terminal 1
./scripts/test_tss.sh pushvaloper1fv2fm76q7cjnr58wdwyntzrjgtc7qya6n7dmlu 39001 30B0D912700C3DF94F4743F440D1613F7EA67E1CEF32C73B925DB6CD7F1A1544

# Terminal 2
./scripts/test_tss.sh pushvaloper12jzrpp4pkucxxvj6hw4dfxsnhcpy6ddty2fl75 39002 59BA39BF8BCFE835B6ABD7FE5208D8B8AEFF7B467F9FE76F1F43ED392E5B9432

# Terminal 3
./scripts/test_tss.sh pushvaloper1vzuw2x3k2ccme70zcgswv8d88kyc07grdpvw3e 39003 957590C7179F8645368162418A3DF817E5663BBC7C24D0EFE1D64EFFB11DC595
```

The script automatically:

- Builds the binary
- Cleans up previous runs (database and home directory)
- Starts the node with proper configuration
- Logs to `/tmp/tss-<validator>.log`

Wait a few seconds for nodes to register, then trigger operations:

```bash
# Generate a new keyshare (keyID is auto-generated by DKLS)
./build/tss keygen

# Refresh the current keyshare
./build/tss keyrefresh

# Sign a message
./build/tss sign -message="Hello, World!"
```

## Commands

- `node` - Run a TSS node (requires `-validator-address` and `-private-key`)
- `keygen` - Generate a new keyshare (keyID is auto-generated by DKLS, no parameters needed)
- `keyrefresh` - Refresh the current keyshare (uses latest keyshare automatically)
- `sign` - Sign a message (requires `-message` flag)

## Flags

### node command:

- `-validator-address` (required): Validator address (unique per node)
- `-private-key` (required): Ed25519 private key in hex format
- `-p2p-listen`: libp2p listen multiaddr (default: `/ip4/127.0.0.1/tcp/0`)
- `-home`: Directory for keyshare storage (default: `/tmp/tss-<validator>`)
- `-db`: Database file path (default: `/tmp/tss-<validator>.db`)
- `-password`: Encryption password for keyshares (default: `demo-password`)

### keygen command:

- No flags required (keyID is auto-generated by DKLS)

### keyrefresh command:

- No flags required (uses latest keyshare automatically)

### sign command:

- `-message` (required): Message string to sign
